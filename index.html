<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lua on your browser</title>
    <script type="module">
        import init,{wasm_func} from "./pkg/lua_on_your_browser2.js"
        init().then(()=>{
            wasm_func();
        });
    </script>

    <script src="./codemirror5/lib/codemirror.js">
    </script>
    <link rel="stylesheet" href="./codemirror5/lib/codemirror.css">
    <!-- <script src=" /mode/javascript/javascript.js"></script> -->
    <script src="./codemirror5/mode/lua/lua.js"></script>
</head>
<body>
    <h1>Lua on your browser</h1>

    <textarea id="my_text_area"></textarea>
    <script type="text/javascript">

    var myCodeMirror = CodeMirror.fromTextArea(document.getElementById("my_text_area"), {
      value: `
local a, b, c = callback(1, 2)
assert(a == 1 and b == 2 and c == 42)
local d, e, f = callback(3, 4)
assert(d == 3 and e == 4 and f == 42)
return a,b,c
`,
      mode:  "lua",
      lineNumbers: true,
    });
    console.log(myCodeMirror.getValue());
    </script>
</body>
</html>